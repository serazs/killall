--[=[
  ULTIMATE KILL AURA
  - Tüm canlıları öldürür (oyuncular, NPC'ler, moblar)
  - Garantili öldürme (Humanoid, Health değeri, BreakJoints)
  - Basit arayüz: aç/kapa + mesafe slider
  - GitHub'a koymak için hazır
]=]

local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local lp = Players.LocalPlayer

-- GUI
local gui = Instance.new("ScreenGui")
gui.Name = "UltimateKillAura"
gui.Parent = lp:WaitForChild("PlayerGui")
gui.ResetOnSpawn = false

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 220, 0, 130)
frame.Position = UDim2.new(0.5, -110, 0.5, -65)
frame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
frame.Active = true
frame.Draggable = true
frame.Parent = gui

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 10)
corner.Parent = frame

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 35)
title.Text = "ULTIMATE KILL"
title.TextColor3 = Color3.fromRGB(255, 50, 50)
title.BackgroundTransparency = 1
title.Font = Enum.Font.GothamBold
title.TextSize = 18
title.Parent = frame

local btn = Instance.new("TextButton")
btn.Size = UDim2.new(0.8, 0, 0, 35)
btn.Position = UDim2.new(0.1, 0, 0.35, 0)
btn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
btn.Text = "AURA AÇ"
btn.TextColor3 = Color3.fromRGB(255, 255, 255)
btn.Font = Enum.Font.GothamBold
btn.TextSize = 14
btn.Parent = frame

local btnCorner = Instance.new("UICorner")
btnCorner.CornerRadius = UDim.new(0, 6)
btnCorner.Parent = btn

-- Slider
local sliderBg = Instance.new("Frame")
sliderBg.Size = UDim2.new(0.8, 0, 0, 20)
sliderBg.Position = UDim2.new(0.1, 0, 0.75, 0)
sliderBg.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
sliderBg.Parent = frame

local sliderCorner = Instance.new("UICorner")
sliderCorner.CornerRadius = UDim.new(0, 4)
sliderCorner.Parent = sliderBg

local sliderFill = Instance.new("Frame")
sliderFill.Size = UDim2.new(0.5, 0, 1, 0)
sliderFill.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
sliderFill.BorderSizePixel = 0
sliderFill.Parent = sliderBg

local fillCorner = Instance.new("UICorner")
fillCorner.CornerRadius = UDim.new(0, 4)
fillCorner.Parent = sliderFill

local distText = Instance.new("TextLabel")
distText.Size = UDim2.new(0.5, 0, 1, 0)
distText.Position = UDim2.new(0.5, 0, 0, 0)
distText.BackgroundTransparency = 1
distText.Text = "25"
distText.TextColor3 = Color3.fromRGB(255, 255, 255)
distText.Font = Enum.Font.Gotham
distText.TextSize = 12
distText.Parent = sliderBg

-- Değişkenler
local active = false
local range = 25
local dragging = false

-- Slider
sliderBg.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
    end
end)

sliderBg.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local mouseX = input.Position.X
        local bgX = sliderBg.AbsolutePosition.X
        local bgW = sliderBg.AbsoluteSize.X
        local percent = math.clamp((mouseX - bgX) / bgW, 0, 1)
        sliderFill.Size = UDim2.new(percent, 0, 1, 0)
        range = math.floor(5 + percent * 45)
        distText.Text = tostring(range)
    end
end)

sliderBg.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = false
    end
end)

-- Öldürme fonksiyonu (çok yönlü)
local function killEverythingInRange()
    local char = lp.Character
    if not char then return end
    local root = char:FindFirstChild("HumanoidRootPart") or char:FindFirstChild("Torso") or char:FindFirstChild("Head")
    if not root then return end
    local pos = root.Position

    -- Workspace'teki tüm modelleri tara
    for _, obj in ipairs(Workspace:GetDescendants()) do
        if obj:IsA("Model") and obj ~= char then
            -- Mesafe için bir referans bul
            local ref = obj:FindFirstChild("HumanoidRootPart") or obj:FindFirstChild("Torso") or obj:FindFirstChild("Head") or obj:FindFirstChildOfClass("Part")
            if ref then
                local dist = (pos - ref.Position).Magnitude
                if dist <= range then
                    -- 1. Humanoid varsa öldür
                    local hum = obj:FindFirstChildOfClass("Humanoid")
                    if hum then
                        hum.Health = 0
                    end
                    
                    -- 2. Tüm Health değerlerini sıfırla
                    for _, val in ipairs(obj:GetDescendants()) do
                        if val:IsA("NumberValue") and (val.Name == "Health" or string.find(val.Name, "Health")) then
                            val.Value = 0
                        end
                    end
                    
                    -- 3. Modeli parçala (BreakJoints)
                    pcall(function() obj:BreakJoints() end)
                end
            end
        end
    end
end

-- Döngü
local function loop()
    while active do
        killEverythingInRange()
        task.wait(0.1)  -- 0.1 saniyede bir kontrol (kasma yapmaz)
    end
end

-- Buton
btn.MouseButton1Click:Connect(function()
    active = not active
    if active then
        btn.Text = "AURA KAPAT"
        btn.BackgroundColor3 = Color3.fromRGB(100, 20, 20)
        coroutine.wrap(loop)()
    else
        btn.Text = "AURA AÇ"
        btn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    end
end)

-- Bildirim
game:GetService("StarterGui"):SetCore("SendNotification", {
    Title = "Ultimate Kill Aura",
    Text = "Tüm canlıları öldürür",
    Duration = 4
})
