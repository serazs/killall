--[=[
  TAKİP EDEN HASAR TOPU
  - Etrafında dönen bir top sana takılır
  - Değdiği her canlıya hasar verir
  - Basit ve etkili
]=]

local Players = game:GetService("Players")
local lp = Players.LocalPlayer
local RunService = game:GetService("RunService")

-- GUI (basit)
local gui = Instance.new("ScreenGui")
gui.Name = "DamageBall"
gui.Parent = lp:WaitForChild("PlayerGui")

local btn = Instance.new("TextButton")
btn.Size = UDim2.new(0, 120, 0, 40)
btn.Position = UDim2.new(0.5, -60, 0.5, -20)
btn.Text = "TOPU AÇ"
btn.Parent = gui
btn.Draggable = true

local active = false
local ball = nil

local function createBall()
    local char = lp.Character
    if not char then return end
    local root = char:FindFirstChild("HumanoidRootPart") or char:FindFirstChild("Torso")
    if not root then return end
    
    ball = Instance.new("Part")
    ball.Size = Vector3.new(3, 3, 3)
    ball.Shape = Enum.PartType.Ball
    ball.BrickColor = BrickColor.new("Really red")
    ball.Material = Enum.Material.Neon
    ball.CanCollide = false
    ball.Anchored = false
    ball.Position = root.Position + Vector3.new(0, 3, 0)
    ball.Parent = workspace
    
    -- Fizik motoru
    local bodyGyro = Instance.new("BodyGyro")
    bodyGyro.MaxTorque = Vector3.new(0, 40000, 0)
    bodyGyro.P = 20000
    bodyGyro.D = 100
    bodyGyro.Parent = ball
    
    local bodyPosition = Instance.new("BodyPosition")
    bodyPosition.MaxForce = Vector3.new(40000, 40000, 40000)
    bodyPosition.P = 20000
    bodyPosition.D = 100
    bodyPosition.Parent = ball
    
    -- Takip et
    RunService.Heartbeat:Connect(function()
        if ball and ball.Parent and char and root then
            bodyPosition.Position = root.Position + Vector3.new(0, 5, 0)
            bodyGyro.CFrame = root.CFrame
        end
    end)
    
    -- Değdiğine hasar ver
    ball.Touched:Connect(function(hit)
        if not active then return end
        local model = hit.Parent
        if model == char then return end
        local hum = model:FindFirstChildOfClass("Humanoid")
        if hum and hum.Health > 0 then
            hum.Health = hum.Health - 20
        else
            -- Alternatif health değerleri
            for _, child in ipairs(model:GetChildren()) do
                if child:IsA("NumberValue") and child.Name:lower():find("health") then
                    child.Value = child.Value - 20
                end
            end
        end
    end)
end

btn.MouseButton1Click:Connect(function()
    active = not active
    if active then
        btn.Text = "TOPU KAPAT"
        if not ball then createBall() end
    else
        btn.Text = "TOPU AÇ"
        if ball then ball:Destroy() ball = nil end
    end
end)
